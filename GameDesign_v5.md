# 方寸喵居 (Tiny Meow Abode) - 游戏策划文档 v5.0 (Final)

## 1. 游戏概述
**核心玩法**：放置类 / 模拟经营 / 装修
**目标**：通过放置家具吸引猫咪互动，收集爱心（货币），解锁更多家具，打造温馨的猫咪小屋。
**平台**：PC (Web) / Mobile (Web)

## 2. 核心机制

### 2.1 放置与装修
- **家具类型**：
  - **地面 (Floor)**：床、沙发、柜子、猫爬架等。
  - **墙面 (Wall)**：窗户、画、挂件、壁灯。
  - **小型 (Small/Surface)**：放在桌子/柜子上的摆件（杯子、台灯、玩具）。
  - **地毯 (Rug)**：铺在地面最下层。
  - **盲盒 (Blind Box)**：特殊道具，购买后随机开出隐藏款手办。
- **放置规则**：
  - 碰撞检测：家具之间不能重叠（地毯/墙饰除外）。
  - 自动吸附：小型物品自动吸附到桌柜表面。
  - 旋转：支持 90 度旋转。

### 2.2 猫咪互动系统
- **AI 行为状态机**：
  - **Idle (发呆)**：随机停留。
  - **Walk (移动)**：寻路前往目标家具。
  - **Interact (互动)**：根据家具类型播放动画（睡觉、玩耍、抓挠）。
  - **Needs (需求)**：
    - **饥饿 (Hunger)**：低于 40 时寻找猫食盆。若无食物，头顶冒 🐟 气泡。
    - **如厕 (Toilet)**：低于 40 时寻找猫砂盆。若无厕所，头顶冒 💩 气泡。
    - **数值衰减**：
      - 饥饿：~4.8小时/周期 (每天5顿)
      - 如厕：~12小时/周期 (每天2次)
- **玩家互动**：
  - **抚摸 (Pet)**：点击猫咪增加好感度，掉落爱心。
  - **激怒**：连续抚摸次数过多，猫咪会生气 (💢) 并拒绝互动。

### 2.3 经济系统
- **货币**：爱心 (Heart) ❤️
- **获取方式**：
  - 抚摸猫咪 (+1)
  - 喂食猫咪
  - 猫咪自动使用家具 (+1~2)
  - 每日首次登录奖励 (+50)
  - 观看广告/GM指令（调试用）
- **消耗**：
  - 购买家具
  - 补充猫粮 (-10)
  - 清理猫砂

### 2.4 天候与日记系统
- **实时天气**：基于现实时间或随机生成（晴天、雨天、多云、极光之夜）。
- **日记 (Diary)**：
  - 自动记录猫咪生活（吃饭、睡觉、玩耍）。
  - 离线收益：记录离线期间的时间流逝。
  - 特殊事件：节日（圣诞节、春节）会有特殊日记条目。
  - **跨设备存档**：日记数据包含在存档文件中，可导出导入。

## 3. 资产列表 (FurnitureDB)

### 核心功能类
| ID | 名称 | 功能 |
| :--- | :--- | :--- |
| food_bowl | 猫食盆 | 补充饥饿度 |
| litter_box | 猫砂盆 | 补充如厕值 |

### 盲盒系列 (马年限定)
- **奖池**：
  - 烈焰小马 (Ponyta) - 隐藏款
  - 黑骏马 (Black)
  - 萌萌小马 (Pink)
- **特性**：玩具属性，猫咪会对其进行特殊互动（跳跃/转圈）。

### 装修风格
- **圣诞风**：圣诞树、壁炉、姜饼人地毯、圣诞袜。
- **新中式**：屏风、围棋、茶台、春节福字、中国结、醒狮面具。
- **现代简约**：沙发、电视柜、落地灯、扫地机器人（可骑乘）。

## 4. 操作交互
- **PC 端**：鼠标左键点击/拖拽，右键旋转视角，滚轮缩放。
- **移动端**：单指拖拽家具，双指缩放/旋转视角。长按家具进入编辑模式。

## 5. 版本记录
- **v1.0**: 基础放置与猫咪AI。
- **v2.0**: 增加天气系统与日记。
- **v3.0**: 移动端适配与触摸优化。
- **v4.0**: 盲盒系统与春节家具。
- **v5.0 (Current)**: 
  - 修复移动端操作与UI。
  - 优化数值平衡（饥饿/如厕）。
  - 完善跨端存档与日记同步。
